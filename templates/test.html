<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul id="test">

    </ul>

    <script>
        function getData(){
            fetch('http://127.0.0.1:8000/api/')
            .then((response) => {
              return response.json();
            })
            .then((data) => {
                
              var test = document.getElementById('test')
              //console.log(data[0]['changes']['changeTimestamp']);
              var time = data[0]['changes']['changeTimestamp']
              //console.log(test)
              var s = new Date(time).toLocaleTimeString('en-GB')

              function format_time(s) {
                const dtFormat = new Intl.DateTimeFormat('ru-RU', {
                  timeStyle: 'medium',
                  timeZone: 'UTC'
                });
                
                return dtFormat.format(new Date(s * 1e3));
              }

              arr = [];

              for(var i = 0;i< data.length; i++){
                console.log(data[i]['changes']['changeTimestamp']);
                var test = document.getElementById('test')
                var time = data[i]['changes']['changeTimestamp']
                item =  '<li>' + format_time(time) +'</li>';
                test.innerHTML = item;
                arr.push(item);
              }

              test.innerHTML = arr;
              
            });
          }

          setInterval(() => {
            getData()
          }, 1000);

    </script>
</body>
</html>